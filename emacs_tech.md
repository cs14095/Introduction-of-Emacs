## What is emacs
Emacsはテキストエディタ...というよりEmacs Lispの実行環境．  
ちなみにこの文章はEmacsのmarkdown-mode...ではなくMacdownで書いている(⌒-⌒; )


## Why you should use Emacs
いきなりこれを書くのはどうかと思うが，あなたはEmacs向きではないかもしれない．  
こればかりは好みなので好きな環境を選択すればよい．  
参考までにいくつかのエディタの特徴をまとめる．  
だが残念ながら，次項以下で紹介するのはEmacsだけである．

 - **Emacs**
	- + ターミナル上で動作．
	- + 拡張性が高い．
	- + 直感的である．
	- - コミュニティが貧弱．
	- - プラグインを入れすぎると重い．
	- - プリインストールされていないことが多い．

 - **Vim**
 	- + 3つのモードを用意することで軽快に動作．  
	- + 様々なコマンドを覚えることで高速な編集が可能．
	- + ターミナル上，ほぼあらゆる環境で動作．
	- + Windowsとの親和性が高い．
	- + 大体のUNIX系ディストリビューションでプリインストールされている．(vi)
	- - コマンドが直感的でない．
	- - 習熟にある程度の時間が必要．
	
 - **Sublime Text**
	- + 無料で使えるリッチなテキストエディタ．  
	- + プラグインも豊富かつモダンなデザイン．  
	- + シンプルかつ軽快．
	- - ターミナル上で実行できない．
	- - Vim, Emacsと比べると拡張性に劣る．
	- - 日本語のドキュメントが少ない．
	
 - **Atom**
	- + デフォルトでモダンな環境が用意されたエディタ．
	- + Github製ということもあってgitとの連携が取れている．
	- - 重い．とにかく重い．
	- - ターミナル上で実行できない．
	- - プラグインが少ない．

ターミナル上で動作することを意識するなら間違いなくVimかEmacsを選択することになるはずである．  
**ではなぜEmacsを推奨するのか．**  
それは間違いなくEmacs Lispで自由に拡張することが可能だからである．  
Lispが好きで，ターミナルが好きで，自分好みにとにかく弄り倒したいならEmacsを選ぶべきである．
そうでない人はこれからそうなるので心配する必要はない．


## Emacsの導入
`sudo apt-get install emacs`でもなんでもすれば良い．  
Windowsを使用する人はCygwinを導入してみよう．  
でも後々色々困るので仮想マシンにLinuxをぶち込むか，デュアルブートしてみよう．  
デュアルブートが怖い！という人はUbuntuなら簡単にできるので大丈夫．  
少し調べればすぐに懇切丁寧なドキュメントが発掘できる．  
ここで色々と躓くかもしれないが，それも良い機会である．  
挫折してしまったらSublimeに戻るのもいいかもしれない．  
無事乗り越えたら起動確認して，適当なファイルを開いて次項へ進もう．


## Emacsの操作
Emacsには数多くのコマンドが存在するので混乱するかもしれない．  
だが幾つかのコマンドを覚えるだけでも十分に高速な編集ができるだろう．  
カーソル移動用のキーバインドを覚えるだけでも，カーソルキーを連打するよりはマシになるはずである．  
それでは，まず簡単なカーソル移動について学んでみよう．  
`C`はコントロールキー，`M`はAlt(option)キー，`ESC`はエスケープキーである．  
`-`は同時押しを意味し，`,`は一度話した後に続くものを入力する．  
キーボードのAの横がCapsLockの人はCにバインドしておこう．  
また，ESCが遠くて押しにくいという人は`C-[`で代用が可能なのでそちらを使おう．

| キー | 説明 |
|:---:|:---:|
|C-f|カーソルを一つ前に進める|
|C-b|カーソルを一つ前に戻す|
|C-n|カーソルを下の行に移動|
|C-p|カーソルを上の行に移動|

どうだろう．少し複雑でわかりにくいかもしれない．  
ここで，各コマンドの意味について考えてみよう．  
fはforward，bはbackward，pはprevious，nはnextである．  
少しは直感的に感じられただろうか．  
これに慣れてしまえば，あとは直感性は置いてけぼりでも構わない．  
カーソル移動と合わせて使っている内に絶対に覚えられるはずである．  
では，次によく使う便利なコマンド達を紹介する．  
これはデフォルトでインストールしていて，かつ私がよく使用しているものに過ぎない．  
状況に応じて別のものを使用することもあるので，これは極一部ということを念頭に置いてほしい．  
より便利なキーを知りたければ自分で調べてみよう．  

| キー | 説明 |
|:---:|:---:|
|M-f|次の単語へ移動(C-fよりも早い)|
|M-b|前の単語へ移動|
|C-a|行の先頭に移動|
|C−e|行の末尾に移動|
|C-v|ページを下にスクロール|
|M-v|ページを上にスクロール|
|C-k|現在のカーソルの位置から行末までを削除|
|C-/|Undo|
|ESC, <|ファイルの先頭に移動|
|ESC, >|ファイルの末尾に移動|
|M-g, M-g|指定した行番号の行へ移動|

ざっとこんなもんだろうか．  
思い出したら追記することにする．


## 範囲選択
次は範囲選択でもしてみよう．  
恐らくターミナルで編集したことがない人間は，思わずマウスを持ち出してしまうだろう．  
だがそれでは折角のCUIを活かしきれない．  
自分を制約して，初めてステップにたどり着ける．  
というわけで，GUI版Emacsを開いている人はすぐに閉じよう．  
ファイルをセーブしたければ`C-x, C-s`，終了したければ`C-x, C-c`だ．  
無事ファイルを閉じることができただろうか．  
それではターミナルを起動しよう．  
`$ emacs -nw`で，CUI版Emacsを起動できる．  
ここで一つ．毎回`-nw`オプションは付けたくないだろう．  
そういう人はシェルの設定ファイルに，`alias emacs="emacs -nw"`を追加だ．  
シェルの設定ファイルはbashなら.bash_profileとかに追記してやればよい．  
  
少し話が逸れたが範囲選択に戻ろう．
範囲選択は開始位置を`C-SPC`で選択する．  
Ubuntuの初期設定ではうまく動かないかもしれない．そういうときは`C-@`で選択できるはずだ．  
あとはカーソルを終了位置まで移動させて，コマンドを実行すれば選択範囲に適用できる．  
選択範囲に適用するコマンドとして，ここでもいくつか例を示す．

| キー | 説明 |
|:---:|:-----|
|C-w|選択範囲を削除|
|M-w|選択範囲をコピー|
|C-;|選択範囲をコメントアウト|

ここら辺は簡単だ．  
ちなみにEmacsで削除された部分は基本的にキルリングという部分に入る．  
削除したあとに`C-y`すればペーストが可能だ．  
言葉で説明すると，わかりにくいのでチュートリアルを挟もう．
例えば，`Hello World!`という文字列があってHelloの部分を削除したかったとする．  
カーソルを|で表すとしよう．  
  
`|Hello World!`  
ここで`C-SPC`で範囲選択開始，`M-f`で移動．  
`Hello| World!`  
`C-w`で削除．  
`| World!`  
`C-y`でペースト．  
`Hello| World!`  
  
こんな具合で範囲選択と，それに対する簡単なコマンドを実行できる．  


## Emacsの設定
基本的な操作は，以上の項で説明できた．  
次は拡張のための最初のステップに入ろう．
Emacsには設定ファイルが存在し，そこに自分好みの設定をEmacs Lispで書き込んでいく．  
`~/.emacs.d/init.el`というファイルを作ればEmacsが自動でロードしてくれるだろう．  
また，`~/.emacs.el`というファイルでもロードしてくれるが，現在は非推奨である．  
詳しい設定については後述する．  

